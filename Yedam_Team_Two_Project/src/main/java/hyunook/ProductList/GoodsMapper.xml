<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hyunook.ProductList.GoodsMapper">
	<select id="privateProductList" resultType="common.Goods" parameterType="String">
	   <!-- 개인판매자 조회 -->
	    SELECT * 
       FROM goods
       WHERE member_id IN (SELECT member_id
                          FROM member
                          WHERE member_type='SELLER')
       AND category_id IN(SELECT category_id
                           FROM CATEGORIES
                           WHERE name = #{name } )
       
	</select>
	
	<select id="goodsList">
		SELECT goods_id,
               name,
               description,
               price,
               req_date,
               member_id
		FROM goods
		ORDER BY req_date DESC  
	</select>
	
	<insert id="insertGoods" parameterType="common.Goods">
		INSERT INTO goods  (goods_id,
	                        name,
	                        description,
	                        price,
	                        hashtag,
	                        view_cnt,
	                        image,
	                        goods_state,
	                        req_type,
	                        req_date,
	                        resp_date,
	                        category_id,
	                        member_id,
	                        score_id)
		VALUES (goods_id_seq.NEXTVAL,
                #{name},
                #{description},
                1000,
                '#',
                0,
                #{image},
                'sale',
                'NONE',
                SYSDATE,
                SYSDATE,
                1,
                'userId1',
                1)
	</insert>
	
	<delete id="removeGoods" parameterType="string">
		delete goods where goods_id = #{goodsId}
	</delete>
</mapper>